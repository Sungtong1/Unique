(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d4bd271"],{"561f":function(e,t,o){"use strict";o.r(t);var a=o("7a23"),l=o("cb98"),n=o.n(l);const c={class:"page-wrap"},s={class:"header-section has-header-main bg-pattern-3"},r={class:"create-section section-space-b pt-4 pt-md-5 mt-md-4"},i={class:"container"},d={class:"row justify-content-center"},m={class:"col-lg-8"},b={class:"section-head-sm"},f=Object(a["createElementVNode"])("em",{class:"ni ni-arrow-left"},null,-1),p=Object(a["createTextVNode"])(" Home "),u={class:"mt-2"},h={class:"col-lg-8"},g={action:"#",class:"form-create mb-5 mb-lg-0"},j={class:"form-item mb-4"},N=Object(a["createElementVNode"])("h5",{class:"mb-3"},"Upload file",-1),O={class:"file-upload-wrap"},E=Object(a["createElementVNode"])("p",{class:"file-name mb-4",id:"file-name"},"PNG, GIF, WEBP, MP4 or MP3. Max 100mb.",-1),V=Object(a["createElementVNode"])("label",{for:"file-upload",class:"input-label btn btn-dark"},"Choose File",-1),v={class:"form-item mb-4"},w={class:"mb-4"},y=Object(a["createElementVNode"])("label",{class:"mb-2 form-label"},"Title",-1),k={class:"mb-4"},T=Object(a["createElementVNode"])("label",{class:"mb-2 form-label"},"Description",-1),D={key:0,class:"modal fade",id:"createNftModal",tabindex:"-1","aria-hidden":"true"},C={class:"modal-dialog modal-dialog-centered"},P={class:"modal-content"},x={class:"modal-header"},S={class:"modal-title"},M=Object(a["createElementVNode"])("button",{type:"button",class:"btn-close icon-btn","data-bs-dismiss":"modal","aria-label":"Close"},[Object(a["createElementVNode"])("em",{class:"ni ni-cross"})],-1),A={class:"modal-body"},I=["innerHTML"],F={class:"mb-3"},R={class:"form-label"},U={key:1,class:"modal fade",id:"createNftModal2",tabindex:"-1","aria-hidden":"true"},H={class:"modal-dialog modal-dialog-centered"},B={class:"modal-content"},K={class:"modal-header d-flex flex-column"},L={class:"modal-title d-flex justify-content-center"},_=Object(a["createElementVNode"])("button",{type:"button",class:"btn-close icon-btn","data-bs-dismiss":"modal","aria-label":"Close"},[Object(a["createElementVNode"])("em",{class:"ni ni-cross"})],-1),G=Object(a["createElementVNode"])("p",{class:"d-flex justify-content-center"},"Wow! You just create your NFT",-1),W=Object(a["createElementVNode"])("div",{class:"modal-body d-flex flex-column"},[Object(a["createElementVNode"])("div",{class:"mb-3 d-flex justify-content-center"},[Object(a["createElementVNode"])("img",{src:n.a,class:"justify-content-center",alt:""})])],-1);function $(e,t,o,l,n,$){const z=Object(a["resolveComponent"])("HeaderMain"),J=Object(a["resolveComponent"])("router-link"),Y=Object(a["resolveComponent"])("Footer");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",c,[Object(a["createElementVNode"])("header",s,[Object(a["createVNode"])(z)]),Object(a["createElementVNode"])("section",r,[Object(a["createElementVNode"])("div",i,[Object(a["createElementVNode"])("div",d,[Object(a["createElementVNode"])("div",m,[Object(a["createElementVNode"])("div",b,[Object(a["createVNode"])(J,{to:{name:"Home"},class:"btn-link fw-semibold"},{default:Object(a["withCtx"])(()=>[f,p]),_:1}),Object(a["createElementVNode"])("h1",u,Object(a["toDisplayString"])(n.SectionData.createData.title),1)])]),Object(a["createElementVNode"])("div",h,[Object(a["createElementVNode"])("form",g,[Object(a["createElementVNode"])("div",j,[N,Object(a["createElementVNode"])("div",O,[E,Object(a["createElementVNode"])("input",{id:"file-upload",class:"file-upload-input","data-target":"file-name",type:"file",enctype:"multipart/form-data",onChange:t[0]||(t[0]=(...e)=>$.selectFile&&$.selectFile(...e)),hidden:""},null,32),V])]),Object(a["createElementVNode"])("div",v,[Object(a["createElementVNode"])("div",w,[y,Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"form-control form-control-s1","onUpdate:modelValue":t[1]||(t[1]=e=>n.form.nftName=e),placeholder:"e. g. Redeemable T-Shirt with logo"},null,512),[[a["vModelText"],n.form.nftName]])]),Object(a["createElementVNode"])("div",k,[T,Object(a["withDirectives"])(Object(a["createElementVNode"])("textarea",{name:"message",class:"form-control form-control-s1","onUpdate:modelValue":t[2]||(t[2]=e=>n.form.nftDescription=e),placeholder:"e. g. After purchasing you’ll be able to get the real T-Shirt"},null,512),[[a["vModelText"],n.form.nftDescription]])])]),Object(a["createElementVNode"])("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#createNftModal",class:"btn btn-dark d-block",onClick:t[3]||(t[3]=(...e)=>$.checkInputData&&$.checkInputData(...e))},"Create Item")])])])])]),Object(a["createVNode"])(Y,{classname:"bg-black on-dark"}),this.form.nftDescription&&this.form.nftName&&this.form.file?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",D,[Object(a["createElementVNode"])("div",C,[Object(a["createElementVNode"])("div",P,[Object(a["createElementVNode"])("div",x,[Object(a["createElementVNode"])("h4",S,Object(a["toDisplayString"])(n.SectionData.createNftModal.title),1),M]),Object(a["createElementVNode"])("div",A,[Object(a["createElementVNode"])("p",{class:"mb-3",innerHTML:n.SectionData.createNftModal.content},null,8,I),Object(a["createElementVNode"])("div",F,[Object(a["createElementVNode"])("label",R,Object(a["toDisplayString"])(n.SectionData.createNftModal.labelText),1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"form-control form-control-s1","onUpdate:modelValue":t[4]||(t[4]=e=>n.authorPrivateKey=e),placeholder:"please typing your Private Key"},null,512),[[a["vModelText"],n.authorPrivateKey]])]),Object(a["createElementVNode"])("button",{class:"btn btn-dark d-block",onClick:t[5]||(t[5]=(...e)=>$.submitCreateNFT&&$.submitCreateNFT(...e)),"data-bs-target":"#createNftModal2","data-bs-toggle":"modal"},"Confirm")])])])])):Object(a["createCommentVNode"])("",!0),n.authorPrivateKey&&!0===$.checkInputData?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",U,[Object(a["createElementVNode"])("div",H,[Object(a["createElementVNode"])("div",B,[Object(a["createElementVNode"])("div",K,[Object(a["createElementVNode"])("h4",L,"You created "+Object(a["toDisplayString"])(n.form.nftName),1),_,G]),W])])])):Object(a["createCommentVNode"])("",!0)])}var z=o("bc3a"),J=o.n(z),Y=o("99e5"),q=o.n(Y),Q=o("07a4"),X=o("fe42"),Z=o("c5fa"),ee=o("5502");const te="http://localhost:8081",oe=Z.abi,ae=Z.networks["202112031219"].address,le=Object({NODE_ENV:"production",VUE_APP_SERVER_URL:"http://localhost:8081",BASE_URL:""}).GANACHE_SERVER_URL;let ne=new q.a(new q.a.providers.HttpProvider(le));var ce={name:"Create",data(){return{SectionData:Q["a"],selected:"Select Collection",options:["Select Collection","Abstraction","Patternlicious","Skecthify","Cartoonism","Virtuland","Papercut"],form:{nftWorkUri:null,nftType:null,nftName:null,nftAuthorName:this.username,nftDescription:null,file:null},authorPrivateKey:null,newtokenId:null}},methods:{selectFile(e){this.form.file=e.target.files[0]},checkInputData(){if(this.form.file&&this.form.nftName&&this.form.nftDescription)return console.log("통과"),!0;alert("Please Input information for Create your item")},async submitCreateNFT(){console.log(typeof this.authorPrivateKey);const e=await Object(X["a"])("0x"+this.authorPrivateKey);console.log(typeof e,"체크퍼브키");const t=await this.myAddress;if(console.log(typeof t,"되나"),e===t){let e=new FormData;e.append("nftAuthorName",this.username),e.append("nftName",this.form.nftName),e.append("nftDescription",this.form.nftDescription),e.append("file",this.form.file);const o=await J()({method:"POST",url:te+"/api/file",data:e,headers:{Authorization:this.$store.state.authToken,"Content-Type":"multipart/form-data"}}),a=o.data.nftMetadataUri,l=await new ne.eth.Contract(oe,ae);console.log(l,"NFTcreateContractInstance");let n=await l.methods.create(t,a);console.log(n,"createNFTResponse");const c=n.encodeABI();console.log(c,"contractEncodedMethod");const s={from:t,to:ae,gas:5e5,data:c};console.log(s,"rawTx");const r=await ne.eth.accounts.signTransaction(s,this.authorPrivateKey);if(console.log(r,"signedTx"),null==r)console.log("TransactionSignFailedException");else{let e=await ne.eth.sendSignedTransaction(r.rawTransaction).on("receipt",console.log);console.log(e,"tran");const t=await ne.eth.getTransactionReceipt(e.transactionHash);console.log(t,"createSaleCAss?"),console.log(e,"tran")}console.log("이후 토큰 아이디");let i=await l.methods.current().call(),d=ne.setProvider(new q.a.providers.HttpProvider(le));console.log(ne,"web3"),console.log(d,"web2"),console.log(ne.currentProvider,"?"),this.newtokenId=i,console.log(i,"이거토큰아이디임"),console.log("1번 아이디입니다 "),then(console.log),console.log("아아");await l.methods.ownerOf(i).call().then(console.log),await l.methods.tokenURI(i).call().then(console.log);console.log(i,"newtokenId"),console.log(n,"createNFTResponse"),console.log("------------------------"),i=await l.methods.current().call(),console.log(i,"newtokenId"),console.log(n,"createNFTResponse");let m=l.methods.getApproved(i).call();console.log(m,"11111111111111111"),console.log(i,t,a,ae,"됩니까");await J()({method:"PUT",url:te+"/api/file/update",data:{tokenId:i,ownerAddress:t,metadataUri:a,contractAddress:ae},headers:{Authorization:this.$store.state.authToken}});this.$router.push({name:"ProductDetail",id:i})}else this.authorPrivateKey=null}},computed:{...Object(ee["d"])(["myAddress","username"]),...Object(ee["d"])(["authToken"])},mounted(){function e(e){let t=document.querySelectorAll(e);t.length>0&&t.forEach(e=>{e.addEventListener("change",(function(){var t=document.getElementById(e.dataset.target),o=["jpg","png","gif","webp","mp4","mp3"],a=this.value.split(".").pop(),l=this.value.lastIndexOf("."),n=this.value.substring(l+1),c=t.value=n;o.includes(a)?t.innerHTML=e.files[0].name:(alert(c+" file type not allowed, Please upload jpg, png, gif, webp, mp4 or mp3 file"),t.innerHTML="Please upload jpg, png, gif, webp, mp4 or mp3 file")}))})}e(".file-upload-input")}},se=o("6b0d"),re=o.n(se);const ie=re()(ce,[["render",$]]);t["default"]=ie},cb98:function(e,t,o){e.exports=o.p+"img/nft-full.15f80265.jpg"}}]);