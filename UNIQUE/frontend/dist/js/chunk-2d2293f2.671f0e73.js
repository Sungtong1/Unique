(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2293f2"],{dd40:function(e,t,o){"use strict";o.r(t);var a=o("7a23");const n={class:"page-wrap"},l={class:"header-section has-header-main bg-pattern-3"},c={class:"create-section section-space-b pt-4 pt-md-5 mt-md-4"},s={class:"container"},r={class:"row justify-content-center"},i={class:"col-lg-8"},d={class:"section-head-sm"},m=Object(a["createElementVNode"])("em",{class:"ni ni-arrow-left"},null,-1),p=Object(a["createTextVNode"])(" Home "),h={class:"mt-2"},u={class:"col-lg-8"},f={action:"#",class:"form-create mb-5 mb-lg-0"},b=Object(a["createElementVNode"])("div",{class:"form-item mb-4"},[Object(a["createElementVNode"])("h5",{class:"mb-3"},"Get My Balance")],-1),g={class:"form-item mb-4"},w={class:"mb-4"},j=Object(a["createElementVNode"])("label",{class:"mb-2 form-label"},"My balance",-1),N={class:"mb-4"},O={class:"mb-2 form-label"},E=Object(a["createTextVNode"])("Description "),v=Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-dark d-block"}," d ",-1);function V(e,t,o,V,k,y){const T=Object(a["resolveComponent"])("HeaderMain"),A=Object(a["resolveComponent"])("router-link"),P=Object(a["resolveComponent"])("Footer");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",n,[Object(a["createElementVNode"])("header",l,[Object(a["createVNode"])(T)]),Object(a["createElementVNode"])("section",c,[Object(a["createElementVNode"])("div",s,[Object(a["createElementVNode"])("div",r,[Object(a["createElementVNode"])("div",i,[Object(a["createElementVNode"])("div",d,[Object(a["createVNode"])(A,{to:{name:"Home"},class:"btn-link fw-semibold"},{default:Object(a["withCtx"])(()=>[m,p]),_:1}),Object(a["createElementVNode"])("h1",h,Object(a["toDisplayString"])()+"'s Wallet",1)])]),Object(a["createElementVNode"])("div",u,[Object(a["createElementVNode"])("form",f,[b,Object(a["createElementVNode"])("div",g,[Object(a["createElementVNode"])("div",w,[j,Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"form-control form-control-s1","onUpdate:modelValue":t[0]||(t[0]=e=>k.form.nftName=e),placeholder:"e. g. Redeemable T-Shirt with logo"},null,512),[[a["vModelText"],k.form.nftName]])]),Object(a["createElementVNode"])("div",N,[Object(a["createElementVNode"])("label",O,[E,Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"form-control form-control-s1","onUpdate:modelValue":t[1]||(t[1]=e=>k.form.nftName=e),placeholder:"e. g. Redeemable T-Shirt with logo"},null,512),[[a["vModelText"],k.form.nftName]]),v])])]),Object(a["createElementVNode"])("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#createNftModal",class:"btn btn-dark d-block",onClick:t[2]||(t[2]=(...e)=>y.checkInputData&&y.checkInputData(...e))},"Create Item")])])])])]),Object(a["createVNode"])(P,{classname:"bg-black on-dark"})])}var k=o("bc3a"),y=o.n(k),T=o("99e5"),A=o.n(T),P=o("07a4"),D=o("fe42"),I=o("c5fa"),S=o("5502");const x="https://j6e205.p.ssafy.io",C=I.abi,R=I.networks["202112031219"].address,U=Object({NODE_ENV:"production",VUE_APP_SERVER_URL:"https://j6e205.p.ssafy.io",BASE_URL:""}).GANACHE_SERVER_URL;let L=new A.a(new A.a.providers.HttpProvider(U));var M={name:"Wallet",data(){return{SectionData:P["a"],selected:"Select Collection",options:["Select Collection","Abstraction","Patternlicious","Skecthify","Cartoonism","Virtuland","Papercut"],form:{nftWorkUri:null,nftType:null,nftName:null,nftAuthorName:this.username,nftDescription:null,file:null},authorPrivateKey:null,newtokenId:null}},methods:{selectFile(e){this.form.file=e.target.files[0]},checkInputData(){if(this.form.file&&this.form.nftName&&this.form.nftDescription)return console.log("통과"),!0;alert("Please Input information for Create your item")},async GetBalance(){console.log(this.authorPrivateKey);const e=await Object(D["a"])("0x"+this.authorPrivateKey);console.log(e,"체크퍼브키");const t=await this.myAddress;if(console.log(t,"되나"),e===t){let e=new FormData;e.append("nftAuthorName",this.username),e.append("nftName",this.form.nftName),e.append("nftDescription",this.form.nftDescription),e.append("file",this.form.file);const o=await y()({method:"POST",url:x+"/api/file",data:e,headers:{Authorization:this.$store.state.authToken,"Content-Type":"multipart/form-data"}}),a=o.data.nftMetadataUri,n=await new L.eth.Contract(C,R);await n.methods.current().call({from:t});let l=await n.methods.create(t,a);const c=l.encodeABI(),s={from:t,to:R,gas:5e5,data:c};console.log(s,"rawTx");const r=L.eth.accounts.privateKeyToAccount(this.authorPrivateKey),i=await r.signTransaction(s);if(console.log(i,"signedTx"),null==i)console.log("TransactionSignFailedException");else{let e=await L.eth.sendSignedTransaction(i.rawTransaction).on("receipt",console.log);const t=await L.eth.getTransactionReceipt(e.transactionHash);console.log(t,"여기 뭐떠?")}let d=await n.methods.current().call();this.newtokenId=d,console.log(d,"이거토큰아이디임"),console.log("1번 아이디입니다 "),console.log("아아");await n.methods.ownerOf(d).call().then(console.log),await n.methods.tokenURI(d).call().then(console.log);console.log(d,"newtokenId"),console.log(l,"createNFTResponse"),console.log("------------------------"),d=await n.methods.current().call(),console.log(d,"newtokenId"),console.log(l,"createNFTResponse");let m=n.methods.getApproved(d).call();console.log(m,"11111111111111111"),console.log(d,t,a,R,"됩니까");await y()({method:"PUT",url:x+"/api/file/update",data:{tokenId:d,ownerAddress:t,metadataUri:a,contractAddress:R},headers:{Authorization:this.$store.state.authToken}});this.$router.push({name:"ProductDetail",id:d})}else this.authorPrivateKey=null}},computed:{...Object(S["d"])(["myAddress"])},mounted(){function e(e){let t=document.querySelectorAll(e);t.length>0&&t.forEach(e=>{e.addEventListener("change",(function(){var t=document.getElementById(e.dataset.target),o=["jpg","png","gif","webp","mp4","mp3"],a=this.value.split(".").pop(),n=this.value.lastIndexOf("."),l=this.value.substring(n+1),c=t.value=l;o.includes(a)?t.innerHTML=e.files[0].name:(alert(c+" file type not allowed, Please upload jpg, png, gif, webp, mp4 or mp3 file"),t.innerHTML="Please upload jpg, png, gif, webp, mp4 or mp3 file")}))})}function t(e){let t=document.querySelectorAll(e);t.length>0&&t.forEach(e=>{e.addEventListener("change",(function(){let t=document.getElementById(e.dataset.target);this.checked?t.classList.add("is-shown"):t.classList.remove("is-shown")}))})}e(".file-upload-input"),t(".checkbox-switcher")}},B=o("6b0d"),H=o.n(B);const _=H()(M,[["render",V]]);t["default"]=_}}]);